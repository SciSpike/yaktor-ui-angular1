<div ng-if="allData > 0" class='viewChange' ng-click="grid.enabled = !grid.enabled">
	<span ng-show="grid.enabled" class="glyphicon glyphicon-th-list"></span>
	<span ng-show="!grid.enabled" class="glyphicon glyphicon-th"></span>
</div>
<a ng-if="allData > 0 && grid.enabled" ng-click="grid.showFilters = !grid.showFilters">
	<span ng-show="!grid.showFilters">{{'SHOW.FILTER.OPTIONS' | translate}}</span>
	<span ng-show="grid.showFilters">{{'HIDE.FILTER.OPTIONS' | translate}}</span>
</a>
<br /><br />
<!--this will run IF there is data AND we specified grid view -->
<div ng-if="allData > 0 && grid.enabled" class="findView">
	<div class="filters well" ng-show="grid.showFilters">
		<span ng-repeat="(key, value) in gridHeaders">
			<span ng-switch="value.type">
				<div ng-switch-when="array" ng-init="gridFilter[key] = []; gridFilter[key][0] = {}" class="form-group">
					<input ng-repeat="(innerKey, innerValue) in value.components.elements" type="text" class="form-control" ng-model="gridFilter[key][0][innerKey]" placeholder="{{key}} {{innerKey}}" />
				</div>
				<input ng-switch-default type="text" class="form-control" ng-model="gridFilter[key]" placeholder="{{key}}" />
			</span>
		</span>
		<br />
		<button type="button" class="btn btn-default" ng-click="filterGrid()">{{'FILTER.GRID' | translate}}</button>
	</div>
	<label ng-if="grid.numFilters > 0">{{'FILTERS' | translate}}: </label>
	<span ng-repeat="(key, value) in filtersImplemented">
		<span ng-switch="gridHeaders[key].type">
			<span ng-switch-when='array' class="form-group">
				<span ng-repeat="arrayItem in filtersImplemented[key] track by $index">
					<button ng-repeat="(innerKey, innerValue) in filtersImplemented[key][$parent.$index]" class="btn btn-default filterBtn" ng-model="gridFilter[key][$parent.$index][innerKey]">{{key}} {{innerKey}}: {{innerValue}}<span ng-click="removeFilter(innerKey, key, $parent.$index);" class="glyphicon glyphicon-remove-circle"></span></button>
				</span>
			</span>
			<button ng-switch-default ng-if="key != 'page'" class="btn btn-default filterBtn" ng-model="gridFilter[key]">{{key}}: {{value}}<span ng-click="removeFilter(key);" class="glyphicon glyphicon-remove-circle"></span></button>
		</span>
	</span>
	<br /><br />
	<button ng-repeat="btn in actionButtons track by $index" class="btn btn-default" ui-sref="main.<%- parentStateName%>.{{btn.state}}({id: userId})">{{btn.title | translate}}</button>
	<br /><br />
	<div ng-if="gridOptions.data.length > 0">
		<div ng-if="pagingOptions.totalPages > 1" class="btn-group">
			<button type="button" class="btn btn-default" ng-click="gotoPage(1)">{{'FIRST.PAGE' | translate}}</button>
			<button type="button" class="btn btn-default" ng-repeat="page in pagingOptions.pageButtons" ng-click="gotoPage(page)">{{page}}</button>
			<button type="button" class="btn btn-default" ng-click="gotoPage(pagingOptions.totalPages)">{{'LAST.PAGE' | translate}}</button>
		</div>
	   <div class="uiGridDirective" grid-data='gridOptions.data' grid-options='gridOptions.options'></div>
   </div>
   <div ng-if="gridOptions.data.length == 0">
   		<h5>{{'NO.FILTER.RESULTS' | translate}}</h5>
   </div>
   <div ng-if="allData == 0" class="findView">
		<h5>{{'NO.RESULTS' | translate}}</h5>
	</div>
</div>





<!--this is for NOT grid view BUT there needs to be data-->
<div ng-if="allData > 0 && !grid.enabled" class="findView">
	<br />
	<button ng-repeat="btn in actionButtons track by $index" class="btn btn-default" ui-sref="main.<%- parentStateName%>.{{btn.state}}({id: userId})">{{btn.title | translate}}</button>
	<br /><br />

	<div ng-repeat="row in gridOptions.data track by $index" class="panel panel-default">
		<div class="panel-heading">
		  <h3 class="panel-title"><%- parentStateName%></h3>
		</div>
		<div class="panel-body">
			<p ng-repeat="(key, value) in row"><span ng-if="key != '__t' && key != '_id'">{{key}}: {{value}}</span></p>
			
			<br />
			<% if (agents.lenth> 0){%>
				<label>{{'STATE'|translate}}:</label>
			<% } %>
			<% var objectFindByKey = function(array, key, value) {
                for (var i = 0; i < array.length; i++) {
                  if (array[i][key] == value) {
                    return array[i];
                  }
                }
                return null;
              }
			_.each(agents, function(agent, index){
				var agentName = agent.split('.').reverse().join("_of_");
				var newAgent = objectFindByKey(agentSpec, 'id', agent); %>
				<span ng-bind="gridActions.get<%- newAgent.name%>ConversationState(row._id);">
					{{convState}}
				</span>
				<br /><br />
				<div>
            		<button class='btn btn-default btn-sm text-capitalize' ng-if='gridActions.get<%- newAgent.name%>ConversationState(row._id)==null' ng-click='gridActions.init<%- newAgent.name%>Conversation(row._id);' >{{'INIT'|translate}}</button>
            		<% _.each(newAgent.states, function(state, index){ %>
            			<% var actions = _.toArray(state.elements); %>
            			<% _.each(actions, function(action, i){%>
             				<button class='btn btn-default btn-sm text-capitalize' ng-if='gridActions.get<%- newAgent.name%>ConversationState(row._id)=="<%-state.name%>"' ng-click='gridActions.do<%- agentName%>_<%- state.name %>_<%- action.name.toLowerCase()%>(row._id);' ><%- action.name%></button>
             			<%});%>
             		<% });%>
             	</div>
           <% });%>
		</div>
	</div>
</div>
<br />
<button ng-repeat="btn in actionButtons track by $index" class="btn btn-default" ui-sref="main.<%- parentStateName%>.{{btn.state}}({id: userId})">{{btn.title | translate}}</button>
<br />